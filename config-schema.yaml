# workspace-qdrant-mcp Configuration Schema
# This file defines the complete YAML configuration structure

# Qdrant database connection settings
qdrant:
  url: "http://localhost:6333"
  api_key: "${QDRANT_API_KEY}"  # Environment variable substitution
  timeout_seconds: 30
  retry_count: 3
  use_https: false
  verify_ssl: true

# Daemon configuration and behavior
daemon:
  # SQLite database for state persistence
  database_path: "~/.config/workspace-qdrant/state.db"
  
  # Processing configuration
  max_concurrent_jobs: 4
  job_timeout_seconds: 300
  
  # Priority levels for task management
  priority_levels:
    mcp_server: high
    cli_commands: medium  
    background_watching: low
    
  # Resource limits
  max_memory_mb: 1024
  max_cpu_percent: 80
  
  # gRPC server settings
  grpc:
    host: "127.0.0.1"
    port: 50051
    max_message_size_mb: 100

# Embedding model configuration
embedding:
  provider: "fastembed"  # fastembed, openai, huggingface
  dense_model: "sentence-transformers/all-MiniLM-L6-v2"
  sparse_model: "prithivida/Splade_PP_en_v1" 
  
  # Provider-specific settings
  openai:
    api_key: "${OPENAI_API_KEY}"
    model: "text-embedding-3-small"
    
  huggingface:
    api_key: "${HUGGINGFACE_API_KEY}"
    model: "sentence-transformers/all-MiniLM-L6-v2"

# Collection management settings
collections:
  auto_create: false
  default_global: []
  
  # Collection-specific settings
  settings: {}
    
  # Reserved collection prefixes
  reserved_prefixes: ["_", "system_", "temp_"]

# Folder watching configuration
watching:
  # Default watching behavior
  auto_watch_project: true
  debounce_seconds: 5
  max_file_size_mb: 50
  
  # File patterns
  include_patterns:
    - "*.txt"
    - "*.md" 
    - "*.pdf"
    - "*.epub"
    - "*.docx"
    - "*.py"
    - "*.js"
    - "*.ts"
    - "*.html"
    - "*.css"
    
  ignore_patterns:
    - "*.tmp"
    - "*.log"
    - "*.cache"
    - ".git/*"
    - "node_modules/*"
    - "__pycache__/*"
    - "*.pyc"
    - ".DS_Store"
    
  # Recursive watching settings
  recursive: true
  max_depth: 5
  follow_symlinks: false

# Chunking and processing settings
processing:
  chunk_size: 1000
  chunk_overlap: 200
  min_chunk_size: 100
  
  # File type specific settings
  pdf:
    extract_images: false
    extract_tables: true
    
  docx:
    extract_images: false
    extract_styles: false
    
  code:
    include_comments: true
    language_detection: true

# Web interface settings  
web_ui:
  enabled: true
  host: "127.0.0.1"
  port: 3000
  auto_launch: false
  
  # Security settings
  cors_origins: ["http://localhost:3000"]
  auth_required: false

# Logging and observability
logging:
  level: "INFO"  # DEBUG, INFO, WARN, ERROR
  format: "json"  # json, text
  file_path: "~/.config/workspace-qdrant/logs/daemon.log"
  max_file_size_mb: 10
  backup_count: 5
  
  # Component-specific log levels
  components:
    qdrant_client: "WARN"
    embedding: "INFO"
    file_watcher: "INFO"
    grpc_server: "WARN"

# Performance and monitoring settings
monitoring:
  enabled: true
  metrics_port: 9090
  health_check_interval_seconds: 60
  
  # Performance thresholds
  thresholds:
    max_response_time_ms: 1000
    max_memory_usage_mb: 512
    max_cpu_usage_percent: 70

# Development and debugging settings
development:
  debug_mode: false
  profile_performance: false
  mock_embedding: false
  test_data_path: "tests/data"